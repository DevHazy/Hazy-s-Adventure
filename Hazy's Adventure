using System;
using System.Collections.Generic;

namespace Hazy_s_Adventure
{
    class Program
    {
        static int screenWidth = 80;
        static int screenHeight = 25;
        static int playerX = 0;
        static int playerY = 0;
        static Random rand = new Random();
        static List<Enemy> enemies = new List<Enemy>();

        static void Main(string[] args)
        {
            // Get the player's name
            Console.Write("Enter your character's name: ");
            string playerName = Console.ReadLine();

            Console.WriteLine($"Welcome to Hazy's Adventure, {playerName}!");

            // Initialize the game screen and draw the player character
            InitializeGameScreen();
            DrawGameScreen();

            // Initialize the enemies
            InitializeEnemies();

            // Loop to read input from the keyboard and move the player character
            while (true)
            {
                GetPlayerInput();
            }
        }

        static void InitializeGameScreen()
        {
            Console.Clear();
            Console.WindowWidth = screenWidth;
            Console.WindowHeight = screenHeight;
            Console.BufferWidth = screenWidth;
            Console.BufferHeight = screenHeight;
            Console.CursorVisible = false;
        }

        static void DrawGameScreen()
        {
            Console.Clear();

            // Draw the player character at the current position
            Console.SetCursorPosition(playerX, playerY);
            Console.Write("O");

            // Draw the enemies
            DrawEnemies();

            Console.SetCursorPosition(0, screenHeight - 1);
            Console.Write("Press any arrow key to move, or press Q to quit.");
        }

        static void GetPlayerInput()
        {
            ConsoleKeyInfo input = Console.ReadKey(true);

            switch (input.Key)
            {
                case ConsoleKey.W:
                case ConsoleKey.UpArrow:
                    MovePlayer(0, -1);
                    break;
                case ConsoleKey.A:
                case ConsoleKey.LeftArrow:
                    MovePlayer(-1, 0);
                    break;
                case ConsoleKey.S:
                case ConsoleKey.DownArrow:
                    MovePlayer(0, 1);
                    break;
                case ConsoleKey.D:
                case ConsoleKey.RightArrow:
                    MovePlayer(1, 0);
                    break;
                case ConsoleKey.Q:
                    Environment.Exit(0);
                    break;
                default:
                    break;
            }
        }

        static void MovePlayer(int deltaX, int deltaY)
        {
            int newX = playerX + deltaX;
            int newY = playerY + deltaY;

            // Check if the new position is valid (i.e., not outside the bounds of the game screen)
            if (newX >= 0 && newX < screenWidth && newY >= 0 && newY < screenHeight)
            {
                playerX = newX;
                playerY = newY;
                DrawGameScreen();
            }
        }

        static void InitializeEnemies()
        {
            // World 1 enemies
            enemies.Add(new Enemy("Goblin", 15, 15, 10, 10, false));
            enemies.Add(new Enemy("Orc", 25, 25, 15, 15, false));
            enemies.Add(new Enemy("Dragon", 30, 30, 25, 25, false));

            // World 1 boss
            enemies.Add(new Boss("Chupacabra", 72, 72, 30, 30, true));

            // World 2 Enemies
            enemies.Add(new Enemy("Manticore", 50, 50, 35, 35, false));
            enemies.Add(new Enemy("Vampire", 55, 55, 35, 35, false));
            enemies.Add(new Enemy("Bat", 40, 40, 35, 35, false));
            enemies.Add(new Enemy("Ghoul", 35, 35, 35, 35, false));
            enemies.Add(new Enemy("Giant Rat", 40, 40, 35, 35, false));

            // World 2 boss

            enemies.Add(new Boss("Baron Haze, the dank", 100, 100, 45, 45, true));

            // World 3 Enemies
            enemies.Add(new Enemy("Mummy", 45, 45, 40, 40, false));
            enemies.Add(new Enemy("Wraith", 60, 60, 45, 45, false));
            enemies.Add(new Enemy("Unholy Priest", 35, 35, 35, 25, false));
            enemies.Add(new Enemy("Specter", 55, 55, 40, 40, false));
            enemies.Add(new Enemy("Ghost", 45, 45, 45, 45, false));

            // World 3 boss
            enemies.Add(new Boss("Bloody Death Knight", 140, 140, 65, 65, true));

            // World 4 enemies
            enemies.Add(new Enemy("Minotaur", 80, 80, 55, 60, false));
            enemies.Add(new Enemy("Chimaera", 82, 82, 48, 48, false));
            enemies.Add(new Enemy("Hydra", 100, 100, 60, 72, false));
            enemies.Add(new Enemy("Blood Dragon", 100, 100, 68, 72, false));
            enemies.Add(new Enemy("Demon Summoner", 80, 80, 60, 60, false));

            // World 4 boss
            enemies.Add(new Boss("Rishnok the Demon Lord", 220, 220, 70, 85, true));

    }
}
